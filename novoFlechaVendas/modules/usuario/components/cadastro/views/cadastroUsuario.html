<div class="row">
  <div class="col-xs-12">
    <h3>Cadastro Usuário</h3>
  </div>
</div>

<uib-tabset active="active">
  <uib-tab index="0" heading="Dados Pessoais">
    <div class="row">
      <div class="col-xs-12">
        <h3>Dados do Usuário</h3>
      </div>
    </div>
    <form name="dadosUsuario">
      <div class="row">
        <div class="col-xs-12 col-md-3 form-group">
          <label for="nome">*Nome:</label>
          <input id="nome" class="form-control" type="text" ng-model="ctrl.cadastro.nome" required capitalize>
        </div>
        <div class="col-xs-12 col-md-3 form-group">
          <label for="login">*Login:</label>
          <input id="login" class="form-control" type="text" ng-model="ctrl.cadastro.login" ng-blur="ctrl.verificaUsuarioCadastradoPorLogin()" required>
        </div>
        <div class="col-xs-12 col-md-3 form-group">
          <label for="email">Email:</label>
          <input id="email" class="form-control" type="text" ng-model="ctrl.cadastro.email" capitalize>
        </div>
        <div class="col-xs-12 col-md-3 form-group">
          <label for="regiao">Região:</label>
          <input id="regiao" class="form-control" type="text" ng-model="ctrl.cadastro.regiao" capitalize>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-12 col-md-4 form-group">
          <label for="endereco">Endereço:</label>
          <input id="endereco" class="form-control" type="text" ng-model="ctrl.cadastro.endereco" capitalize>
        </div>
        <div class="col-xs-12 col-md-4 form-group">
          <label for="cpf">CPF:</label>
          <input id="cpf" class="form-control" type="text" ui-mask="999.999.999-99" ng-model="ctrl.cadastro.cpf">
        </div>
        <div class="col-xs-12 col-md-4 form-group">
          <label for="rg">RG:</label>
          <input id="rg" class="form-control" type="text" ui-mask="9999999999" ng-model="ctrl.cadastro.rg">
        </div>
      </div>

      <div class="row">
        <div class="col-xs-12 col-md-4 form-group">
          <label for="perfil">*Perfil:</label>
          <select class="form-control" ng-model="ctrl.cadastro.idPerfil" ng-options="p.id as p.nome for p in ctrl.listaPerfil"></select>
        </div>
        <div class="col-xs-5 col-md-3 form-group">
          <label for="senha1">*Nova Senha:</label>
          <input id="senha1" class="form-control" type="password" ng-model="ctrl.cadastro.senha.senha1" required ng-change="ctrl.sinalizaSenhaAlterada()">
        </div>
        <div class="col-xs-5 col-md-3 form-group">
          <label for="senha2">*Repetir Senha:</label>
          <input id="senha2" class="form-control" type="password" ng-model="ctrl.cadastro.senha.senha2" ng-change="ctrl.sinalizaSenhaAlterada()">
        </div>
        <div class="col-xs-2 col-md-2 form-group">
          <label for="ativo">Ativo:</label>
          <input id="ativo" class="form-control" type="checkbox" ng-model="ctrl.cadastro.ativo" checked="checked">
        </div>
      </div>

      <div class="row">
        <div class="col-xs-4 form-group">
          <label for="telefonePrincipal">Telefone Principal:</label>
          <input id="telefonePrincipal" class="form-control" type="text" ng-model="ctrl.cadastro.telefonePrincipal">
        </div>
        <div class="col-xs-4 form-group">
          <label for="telefone1">Telefone 1:</label>
          <input id="telefone1" class="form-control" type="text" ng-model="ctrl.cadastro.telefone1">
        </div>
        <div class="col-xs-4 form-group">
          <label for="telefone2">Telefone 2:</label>
          <input id="telefone2" class="form-control" type="text" ng-model="ctrl.cadastro.telefone2">
        </div>
      </div>

      <div class="row">
        <div class="col-xs-12 form-group">
          <button class="btn btn-primary" id="btn-cadastrar" ng-click="ctrl.salvaUsuario()" ng-disabled="dadosUsuario.$pristine || dadosUsuario.$invalid">Salvar</button>
          <button class="btn btn-warning" id="btn-excluir" ng-click="ctrl.excluiUsuario()" ng-disabled="dadosUsuario.$pristine || dadosUsuario.$invalid">Excluir</button>
        </div>
      </div>
    </form>

  </uib-tab>

  <uib-tab index="1" heading="Representações" select="ctrl.selecionaTabRepresentacao()" disable="!ctrl.cadastro.id">
    <div class="row">
      <div class="col-xs-12">
        <h3>Dados da Representação</h3>
      </div>
    </div>
    <form name="dadosRepresentacao">
      <div class="row">
        <div class="col-xs-6 form-group">
          <label for="industria">Indústria:</label>
          <select id="industria" class="form-control" ng-model="ctrl.representacao.industria" ng-options="i as i.nome for i in ctrl.listaIndustria track by i.id"></select>
        </div>
        <div class="col-xs-6" class="align-bottom">
          <button class="btn" id="btn-adicionar" ng-click="ctrl.criaRepresentacao()">Adicionar</button>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12">
          <div class="table-responsive" style="height: 90%;">
            <table class="table table-striped table-hover">
              <thead>
                <tr>
                  <th>Ações</th>
                  <th>Indústria</th>
                  <th>Usuário</th>
                  <th>Ativo</th>
                </tr>
              </thead>
              <tbody class="table-striped">
                <tr ng-repeat="r in ctrl.representacoes">
                  <td>
                    <div class="btn-group">
                      <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Ações
                        <span class="caret"></span>
                      </button>
                      <ul class="dropdown-menu">
                        <li>
                          <a href="">Excluir</a>
                        </li>
                      </ul>
                    </div>
                  </td>
                  <td>{{r.nomeIndustria}}</td>
                  <td>{{r.nomeUsuario}}</td>
                  <td>
                    <input type="checkbox" ng-model="r.ativo" />
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12 form-group">
          <button class="btn btn-primary" id="btn-cadastrar-industrias" ng-disabled="dadosRepresentacao.$pristine || dadosRepresentacao.$invalid"
            ng-click="ctrl.salvaUsuario()">Salvar</button>
        </div>
      </div>
    </form>
  </uib-tab>

  <uib-tab index="2" heading="Importação de Dados" select="ctrl.selecionaTabRepresentacaoCliente()" disable="!ctrl.cadastro.id">
    <div class="row">
        <div class="col-xs-12">
          <h3>Importação dados usuário</h3>
        </div>
      </div>
    <div class="row">
      <div class="col-xs-12 col-md-6 form-group">
        <label for="usuario">Usuário de Origem</label>
        <ui-select id="usuario" ng-model="ctrl.importacao.usuario" ng-change="ctrl.selecionaUsuario()" theme="bootstrap" title="Selecione um Usuário:"
          skip-focusser="true">
          <ui-select-match placeholder="Selecione um Usuário">{{$select.selected.id}} - {{$select.selected.nome}}</ui-select-match>
          <ui-select-choices class="small-font" repeat="usuario in ctrl.usuarios | propsFilter: {id: $select.search, nome: $select.search}">
            <div ng-bind-html="usuario.nome | highlight: $select.search"></div>
            <small>
              Código: {{usuario.id}} Login: {{usuario.login}}
            </small>
          </ui-select-choices>
        </ui-select>
      </div>
      <div class="col-xs-12 col-md-6 form-group">
          <label for="usuario">Usuário de Destino</label>
          <input class="form-control" type="text" ng-model="ctrl.nomeUsuarioFormatado" disabled />
      </div>
      <div class="col-xs-12 col-md-2">
        <input class="btn btn-primary" type="button" value="Importar" ng-click="ctrl.importar()" ng-disabled="!ctrl.importacao.usuario" />
      </div>
    </div>

    <div class="row">
      <div class="col-xs-12 form-group">
        <table class="table table-striped table-hover table-center-align">
          <thead>
          </thead>
          <tbody class="table-striped">
            <tr ng-repeat="rc in ctrl.listaRepresentacaoCliente">
              <td>
                <div class="btn-group">
                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Ações <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                      <li><a href="" ng-click="ctrl.excluirRepresentacaoCliente(rc)">Excluir</a></li>
                    </ul>
                  </div>
              </td>
              <td>{{u.id}}</td>
              <td>{{u.nome}}</td>
              <td>{{u.industria}}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </uib-tab>

</uib-tabset>